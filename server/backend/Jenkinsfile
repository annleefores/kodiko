pipeline {
  agent {
    docker {image 'python:3.10.12-buster'}
  }

  stages {
    stage('Static Code Analysis') {
      environment {
        SONAR_URL = "http://13.232.189.247:9000"
      }
      
      steps{
            withCredentials([string(credentialsId: 'sonarqube', variable: 'SONAR_AUTH_TOKEN')]) {
                sh ''' $SCANNER_HOME/bin/sonar-scanner  -Dsonar.url=${SONAR_URL} -Dsonar.login=${SONAR_AUTH_TOKEN} -Dsonar.projectName=kodiko -Dsonar.source=. '''
            }

        }
    }
  }
}